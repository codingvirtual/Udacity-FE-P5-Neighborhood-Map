<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
    <title>Las Vegas Neighborhood Map</title>
    <link rel="stylesheet" href="css/baseStyles.css">
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
    <script type="text/javascript" src="http://oauth.googlecode.com/svn/code/javascript/oauth.js"></script>
    <script type="text/javascript" src="http://oauth.googlecode.com/svn/code/javascript/sha1.js"></script>
    <script type="text/javascript">
        var auth = {
            //
            // Update with your auth tokens.
            //
            consumerKey : "vD-WJpgPbOpyvhEDMpt7PA",
            consumerSecret : "qbgNN0ibK48h7XhixYpce9YKVbA",
            accessToken : "81N4jR3e5lxR3lM0C7DzGcU08xdDk2pd",
            // This example is a proof of concept, for how to use the Yelp v2 API with javascript.
            // You wouldn't actually want to expose your access token secret like this in a real application.
            accessTokenSecret : "tMUB7DAXmwJQoJ97GPur7R3setY",
            serviceProvider : {
                signatureMethod : "HMAC-SHA1"
            }
        };

        var terms = 'Margaritaville';
        var near = 'Las+Vegas';

        var accessor = {
            consumerSecret : auth.consumerSecret,
            tokenSecret : auth.accessTokenSecret
        };
        parameters = [];
        parameters.push(['term', terms]);
        parameters.push(['location', near]);
        parameters.push(['callback', 'cb']);
        parameters.push(['oauth_consumer_key', auth.consumerKey]);
        parameters.push(['oauth_consumer_secret', auth.consumerSecret]);
        parameters.push(['oauth_token', auth.accessToken]);
        parameters.push(['oauth_signature_method', 'HMAC-SHA1']);

        var message = {
            'action' : 'http://api.yelp.com/v2/search',
            'method' : 'GET',
            'parameters' : parameters
        };

        OAuth.setTimestampAndNonce(message);
        OAuth.SignatureMethod.sign(message, accessor);

        var parameterMap = OAuth.getParameterMap(message.parameters);
        console.log(parameterMap);

        $.ajax({
            'url' : message.action,
            'data' : parameterMap,
            'dataType' : 'jsonp',
            'jsonpCallback' : 'cb',
            'success' : function(data, textStats, XMLHttpRequest) {
                console.log(data);
                //$("body").append(output);
            }
        });

    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDCsbuj06OxV_GfeI4LdCxOpJESSxeA1q0"></script>
    <script src="js/vendor/knockout.js"></script>
    <script src="js/app.js"></script>


    <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body>
<div class="container">
    <div class="titlebar">
        <div class="row">
            <div class="col-12">
                <img src="images/Welcome.jpg" alt="Welcome to Las Vegas sign">
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <p>Filter: <input class="search-field">
                </p>
            </div>
        </div>
    </div>
    <div class="content">
        <div class="row">
            <div class="sidebar col-3">
                <p class="center">Points of Interest</p>
                <hr />

                <ul class="loc-list" data-bind="foreach: markers">
                    <li><a data-bind="text: name, click: $parent.toggleMarker"></a></li>
                </ul>
            </div>
            <div class="col-9">
                <div id="map-canvas"></div>
            </div>
        </div>
    </div>
    <div class="footer titlebar">
        <div class="row">
            <div class="col-12">
                <p>Neighborhood Map</p>
            </div>
        </div>
    </div>
</div>

</body>
</html>